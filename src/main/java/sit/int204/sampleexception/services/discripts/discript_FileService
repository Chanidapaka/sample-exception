คลาส FileService นี้ทำหน้าที่ในการจัดการกับไฟล์ที่อัพโหลดและจัดเก็บในเซิร์ฟเวอร์ โดยมีฟังก์ชันหลักๆ ดังนี้:

ส่วนประกอบหลัก:
fileStorageLocation: ใช้เก็บที่อยู่ของไดเรกทอรีที่ใช้เก็บไฟล์
fileStorageProperties: เก็บค่าคอนฟิกต่างๆ เช่น เส้นทางที่ใช้ในการเก็บไฟล์ (uploadDir) และประเภทไฟล์ที่รองรับ (supportFileTypes)

ฟังก์ชันหลัก:
Constructor (FileService):
- อ่านค่าคอนฟิกจาก fileStorageProperties และกำหนดตำแหน่งเก็บไฟล์ (fileStorageLocation).
- ตรวจสอบว่าไดเรกทอรีสำหรับเก็บไฟล์มีอยู่หรือไม่ ถ้าไม่มีก็จะสร้างขึ้น.

store(MultipartFile file):
- ตรวจสอบว่าไฟล์ที่อัพโหลดรองรับประเภทไฟล์หรือไม่
- คัดลอกไฟล์ไปยังไดเรกทอรีที่กำหนดและคืนชื่อไฟล์

loadFileAsResource(String fileName):
- โหลดไฟล์จากที่เก็บตามชื่อไฟล์และคืนเป็น Resource

getFileType(Resource resource):
- ตรวจสอบประเภทของไฟล์โดยใช้ Files.probeContentType()

removeFile(String fileName):
- ลบไฟล์ออกจากที่เก็บตามชื่อไฟล์

store(List<MultipartFile> files):
- รองรับการอัพโหลดไฟล์หลายไฟล์ในครั้งเดียว โดยจะเรียก store() สำหรับแต่ละไฟล์

getMatchedFiles(String pattern):
- ค้นหาไฟล์ที่ตรงกับ pattern ที่กำหนด (ใช้ glob pattern matching)

ใช้ทำอะไร:
จัดการไฟล์: การเก็บไฟล์ที่อัพโหลด, โหลดไฟล์, ลบไฟล์ และตรวจสอบประเภทไฟล์

รองรับหลายไฟล์: ฟังก์ชัน store(List<MultipartFile> files) ใช้ในการจัดการไฟล์หลายๆ อันพร้อมกัน

ค้นหาไฟล์: ฟังก์ชัน getMatchedFiles ใช้ค้นหาไฟล์ที่ตรงกับ pattern ที่กำหนดในโฟลเดอร์

การทำงานของฟังก์ชันเหล่านี้ช่วยให้สามารถอัพโหลด จัดเก็บ และจัดการไฟล์ในแอปพลิเคชันได้อย่างมีประสิทธิภาพ.